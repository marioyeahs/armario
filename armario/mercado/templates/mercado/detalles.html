{% extends "mercado/layout.html" %}

{% load static %}

{% block head %}
    <script type="text/javascript" src="{% static 'mercado/js/detalles.js' %}"></script>
{% endblock %}


{% block body %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<h1><a href="{% url 'mercado:marca' producto.marca %}">{{producto.marca}}</a> | {{producto.modelo}}</h1>

<img src="{% static 'mercado/img/' %}{{producto.modelo}}.jpg" alt="{{producto.modelo}}">

<form id="detailsForm" action="{% url 'mercado:compra' producto.id %}" method="POST"> 
    {% csrf_token %}
    <fieldset>
    <h1>Comprar</h1>
    {% for talla,oferta,min in compras %}
        <br><input type="radio" name="talla" class="tallas"  value="{{ talla }}" checked="checked">
        <label for="talla{{ forloop.counter }}">{{ talla }} - Oferta de compra mas alta $<span class="min" value={{min}}>{{min}}</span></label>
        <button name="comprar_ahora" class="comprar_ahora" value={{oferta}} formaction="{% url 'mercado:compra' producto.id %}">Comprar ahora $ {{oferta}}</button>
    {% endfor %}
    <h1>Vender</h1>
    {% for talla,oferta,max in ventas %}
        <br><input type="radio" name="talla" class="tallas" value="{{ talla }}">
        <label for="talla{{ forloop.counter }}">{{ talla }} - Oferta de venta mas baja $<span class="max" value={{max}}>{{max}}</span> </label>
        <button name="vender_ahora" class="vender_ahora" value={{oferta}} formaction="{% url 'mercado:venta' producto.id %}">Vender ahora $ {{oferta}}</button>
    {% endfor %}
    <hr>
    <label>Monto:</label>
    <input id="intTextBox" name="monto" type="text">
    <p> <span id="oferta"></span> </p>
    </fieldset>
    <input type="submit" id="oferta_compra" value="Oferta de compra"> 
    <input type="submit" id="oferta_venta" value="Oferta de venta" formaction="{% url 'mercado:venta' producto.id %}">
</form>


{% endblock %}